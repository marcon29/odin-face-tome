<% if user.friend?(current_user) %>
    <button class="friend-request-button">Unfriend</button>
<% elsif user.friendship_initiated?(current_user) %>
    <% if current_user.pending_request_senders.include?(user) %>
        <button class="friend-request-button">Accept Request</button>
        <%= form_with(model: user, url: friend_path(0), method: "patch") do |f| %>
            <%= f.hidden_field :id, value: user.id %>
            <%= f.hidden_field :action, value: "rejected" %>
            <%= f.submit "Reject Friend Request", class: "friend-request-button" %>
        <% end %>
    <% elsif current_user.pending_request_receivers.include?(user) %>
        <%= form_with(model: user, url: friend_path(0), method: "delete") do |f| %>
            <%= f.hidden_field :id, value: user.id %>
            <%= f.hidden_field :action, value: "cancel" %>
            <%= f.submit "Cancel Friend Request", class: "friend-request-button" %>
        <% end %>
    <% end %>
<% else %>
    <%= form_with(model: user, url: friends_path, method: "post") do |f| %>
        <%= f.hidden_field :id, value: user.id %>
        <%= f.hidden_field :action, value: "add" %>
        <%= f.submit "Add Friend", class: "friend-request-button" %>
    <% end %>
<% end %>



<% # form diffs(from Add Friend) %>
    <% # cancel: url path, button text, form method %>
    <% # accept: url path (same as cancel, button text, form method %>
    <% # reject:  %>
    <% # unfriend:  %>


